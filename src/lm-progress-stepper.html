<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">

<link rel="import" href="shared-styles.html">

<dom-module id="progress-stepper">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
        --paper-progress-height:10px;
      }

      .container {
  width: 65%;
  margin: 50px auto 0;
  text-align: center;
  padding: 10px 10px;
  display: block;
  font-family: sans-serif;
}
 .progress-indicator {
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;

}

.flexer-element, .progress-indicator > li {
  -ms-flex: 1;
  -webkit-flex: 1;
  -moz-flex: 1;
  flex: 1;
}

.progress-indicator {
  margin: 0;
  padding: 0;
  font-size: 75%;
  /*text-transform: uppercase;*/
  margin-bottom: 1em;
}

.progress-indicator > li {
  list-style: none;
  text-align: center;
  width: auto;
  padding: 0;
  margin: 0;
  position: relative;
  text-overflow: ellipsis;
  color: #bbb;
  display: block;
}

.progress-indicator > li:hover {
  color: #6f6f6f;
}

.progress-indicator > li .bubble {
  border-radius: 50%;
  width: 25px;
  height: 25px;
  background-color: #bbb;
  display: block;
  margin: 0 auto 0.2em auto;
}

.progress-indicator > li .bubble:before, .progress-indicator > li .bubble:after {
  display: block;
  position: absolute;
  top: 11px;
  width: 100%;
  height: 3px;
  content: '';
  background-color: #bbb;
}

.progress-indicator > li .bubble:before {
  left: 0;
}

.progress-indicator > li .bubble:after {
  right: 0;
}

.progress-indicator > li:first-child .bubble:before, .progress-indicator > li:first-child .bubble:after {
  width: 50%;
  margin-left: 50%;
}

.progress-indicator > li:last-child .bubble:before, .progress-indicator > li:last-child .bubble:after {
  width: 50%;
  margin-right: 50%;
}

.progress-indicator > li.completed {
  color: #41AD49;   
}

.progress-indicator > li.completed .bubble {
  background-color: #41AD49;
  color: #41AD49;
  border-color: #41AD49;
}

.progress-indicator > li.completed .bubble:before, .progress-indicator > li.completed .bubble:after {
  background-color: #41AD49;
  border-color: #41AD49;
}

.progress-indicator > li.active {
  color: #337ab7;
}

.progress-indicator > li.active .bubble {
  background-color: #337ab7;
  color: #337ab7;
  border-color: #122a3f;
}

.progress-indicator > li.active .bubble:before, .progress-indicator > li.active .bubble:after {
  background-color: #337ab7;
  border-color: #122a3f;
}

.progress-indicator > li a:hover .bubble {
  background-color: #5671d0;
  color: #5671d0;
  border-color: #1f306e;
}

.progress-indicator > li a:hover .bubble:before, .progress-indicator > li a:hover .bubble:after {
  background-color: #5671d0;
  border-color: #1f306e;
}

.progress-indicator img {
 height: 25px;
 position: relative;
 top:8px;
}

.hidden {
 visibility: hidden;
}
.btn-bar button {
    background-color: #d5d5d5;;
    border: none;
    border-radius:3px;
    color: #000;
    padding: 8px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px;
    width: 85px;
    cursor: pointer;
    float: right;
    position: relative;
    top:4px;
}

.btn-bar{
  float: right;
  display: inline-block;
}

  #cover {
      position: fixed;
      top: 0;
      left: 0;
      background: rgba(0,0,0,0.6);
      z-index: 5;
      width: 100%;
      height: 100%;
      display: none;
  }
  paper-button {
    float: right;
  }

@media handheld, screen and (max-width: 400px) {
  .progress-indicator {
    font-size: 60%;
  }
}

    </style>

        <div class="container">
       
          <div class="btn-bar">
            <paper-button class = "LM-gray" on-click = "saveDialogue">Save</paper-button>
          </div>
       
        <ul class="progress-indicator">

            <li class$="{{isprofile}}">
                <span class="bubble"></span>                
                <img src="./images/tick.png" id='profile' class='hidden' />                   
                {{localize('progress.basicInfo')}}
            </li>

            <li class$="{{isproperty}}">
                <span class="bubble"></span>
                <img src="./images/tick.png" id='property' class='hidden'/>
                {{localize('progress.propSelection')}}
            </li>
             <li class$="{{isproduct}}">
                <span class="bubble"></span>
                <img  src="./images/tick.png" id='products' class='hidden'/>
                {{localize('progress.offerSelection')}}
            </li>
            <li>
                <span class="bubble"></span>
                <img class="hidden" src="./images/tick.png"/>
                {{localize('progress.finalOffer')}}

            </li>
        </ul>
    </div>
    <div id="cover"></div>
      <paper-dialog id="saveDialogBox" no-cancel-on-outside-click >
        <div on-click="closeDialog">
          <paper-icon-button icon="icons:cancel" title="Close" dialog-dismiss></paper-icon-button>
        </div>
        <label>{{localize('progress.savingDtl')}}</label>   
        <paper-button class="custom dialog-orange" dialog-dismiss on-click="closeDialog">Ok</paper-button>             
      </paper-dialog>

  </template>

  <script>
    class ProgressStepper extends LmGlobal {
      static get is() { return 'progress-stepper'; }
     static get properties(){
        return {
          page:{
          type:String,
          value:'',
          reflectToAttribute:true,
          notify:true,
          observer:'_updateProgress'
          },
          stepsCounter : {
            type :Array,
            value:[1,2,3,4]
          },
          isprofile:{
            type: Boolean,
            value:true,
            reflectToAttribute:true,
            notify:true,

          },
          isproperty:{
            type: Boolean,
            value:false,
            reflectToAttribute:true,
            notify:true,
          },
          isproduct:{
            type: Boolean,
            value:false,
            reflectToAttribute:true,
            notify:true,
          }
        }
      }
      _updateProgress(){
        switch(this.page){
          case 'view-profile':
          this.isprofile = 'completed';
          break; 
          case 'property-selection': 
          this.isproperty = 'completed';
          this.isprofile = 'completed';
          this.$.profile.className='';          
            break; 

          case 'products': 
          this.isproduct = 'completed';
          this.isproperty = 'completed';
          this.isprofile = 'completed';
          this.$.profile.className='';
          this.$.property.className='';        
          break; 
        }
      }
      saveDialogue(){
        
        this.$.cover.style.display="block";

        this.$.saveDialogBox.open();
        this.isActive = false;
        return;
      }
      closeDialog(){
        this.$.cover.style.display="none";
        return;
      }

    }

    window.customElements.define(ProgressStepper.is, ProgressStepper);
  </script>
</dom-module>


